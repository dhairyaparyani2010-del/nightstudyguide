<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Night Study Guide</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/lucide-static/dist/lucide.css" rel="stylesheet">
  <style>
    .fade-in { animation: fadeIn 0.5s ease-in; }
    .slide-up { animation: slideUp 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="bg-slate-900 text-slate-200 font-sans min-h-screen">

<div class="container mx-auto p-6">

  <h1 class="text-4xl font-serif text-amber-500 mb-6">Night Study Guide</h1>

  <!-- Tabs -->
  <div class="flex gap-4 mb-8">
    <button onclick="showTab('chapters')" id="tab-chapters" class="bg-amber-500 text-slate-900 px-4 py-2 rounded">Chapters</button>
    <button onclick="showTab('literary')" id="tab-literary" class="bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded">Literary Devices</button>
    <button onclick="showTab('vocabulary')" id="tab-vocab" class="bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded">Vocabulary</button>
    <button onclick="showTab('quiz')" id="tab-quiz" class="bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded">Quiz</button>
  </div>

  <!-- Content Sections -->
  <div id="content"></div>
</div>

<!-- Modal -->
<div id="modal" class="fixed inset-0 hidden bg-black/90 backdrop-blur-md flex items-center justify-center p-4">
  <div class="bg-slate-900 border border-slate-700 w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl relative p-8">
    <button onclick="closeModal()" class="absolute top-4 right-4 p-2 bg-slate-800 rounded-full hover:bg-slate-700">X</button>
    <div id="modal-content"></div>
  </div>
</div>

<script>
  const chapters = [
    {
      id: 1,
      title: "Section 1: Sighet & The Warning",
      summary: "The story begins in 1941 in Sighet, Transylvania...",
      analysis: [
        "The theme of 'Denial' is central here...",
        "The gradual erosion of rights demonstrates the insidious nature of the Holocaust...",
        "Moishe the Beadle represents the 'Prophet' archetype..."
      ],
      keyPoints: ["Moishe's warning is ignored (Theme of Denial).", "Gradual stripping of rights.", "Community's blind optimism."]
    },
    {
      id: 2,
      title: "Section 2: The Cattle Car",
      summary: "Packed into cattle cars with little air, food, or water...",
      analysis: [
        "Breakdown of social norms under extreme stress.",
        "Madame Schächter as a Cassandra figure...",
        "The cattle car strips humanity before arrival at the camp."
      ],
      keyPoints: ["Schächter's foreshadowing.", "Breakdown of community.", "Arrival at Birkenau."]
    }
    // Add other sections similarly...
  ];

  const literaryDevices = [
    { term: "Foreshadowing", definition: "Hints of what is to come.", example: "Madame Schächter screaming 'Fire!'." },
    { term: "Irony", definition: "Contrast between expectation and reality.", example: "Eliezer leaves infirmary but it is liberated soon after." }
    // Add more...
  ];

  const vocabulary = [
    { word: "Anti-Semitism", def: "Hostility or prejudice against Jewish people." },
    { word: "Automatons", def: "People acting mechanically." }
    // Add more...
  ];

  const quizQuestions = [
    { q: "Which literary device is most prominent in Eliezer's parentheses comment?", o: ["Metaphor", "Dramatic Irony", "Simile", "Personification"], c: 1 },
    { q: "What does Moishe's transformation symbolize?", o: ["Physical toll", "Loss of innocence", "Confusion", "Storytelling"], c: 1 }
    // Add more...
  ];

  let activeTab = 'chapters';
  let quizScore = 0;
  let currentQuestion = 0;

  function showTab(tab) {
    activeTab = tab;
    document.getElementById("tab-chapters").classList.remove("bg-amber-500","text-slate-900");
    document.getElementById("tab-literary").classList.remove("bg-amber-500","text-slate-900");
    document.getElementById("tab-vocab").classList.remove("bg-amber-500","text-slate-900");
    document.getElementById("tab-quiz").classList.remove("bg-amber-500","text-slate-900");

    document.getElementById(`tab-${tab}`).classList.add("bg-amber-500","text-slate-900");

    renderContent();
  }

  function renderContent() {
    const container = document.getElementById("content");
    container.innerHTML = "";

    if(activeTab === "chapters") {
      chapters.forEach(ch => {
        const div = document.createElement("div");
        div.className = "bg-slate-800/50 border border-slate-700 p-6 rounded-xl mb-4 cursor-pointer hover:bg-slate-700/50";
        div.innerHTML = `<h3 class="text-xl font-serif text-white mb-2">${ch.title}</h3><p class="text-slate-400">${ch.summary}</p>`;
        div.onclick = () => openModal(ch);
        container.appendChild(div);
      });
    } else if(activeTab === "literary") {
      literaryDevices.forEach(d => {
        const div = document.createElement("div");
        div.className = "bg-slate-800/40 border border-slate-700 p-4 rounded-xl mb-4";
        div.innerHTML = `<h3 class="text-lg font-bold text-amber-500">${d.term}</h3><p class="text-slate-300 text-sm mb-2">${d.definition}</p><p class="text-slate-400 italic text-sm">"${d.example}"</p>`;
        container.appendChild(div);
      });
    } else if(activeTab === "vocabulary") {
      vocabulary.forEach(v => {
        const div = document.createElement("div");
        div.className = "bg-slate-900 border border-slate-800 p-4 rounded-lg mb-4";
        div.innerHTML = `<h3 class="text-amber-500 font-bold">${v.word}</h3><p class="text-slate-400 text-sm">${v.def}</p>`;
        container.appendChild(div);
      });
    } else if(activeTab === "quiz") {
      renderQuiz();
    }
  }

  function openModal(ch) {
    document.getElementById("modal").classList.remove("hidden");
    const modalContent = document.getElementById("modal-content");
    modalContent.innerHTML = `<h2 class="text-2xl font-serif text-white mb-4">${ch.title}</h2>
      <h3 class="font-semibold text-amber-500 mb-2">Summary</h3><p>${ch.summary}</p>
      <h3 class="font-semibold text-amber-500 mt-4 mb-2">Analysis</h3><ul>${ch.analysis.map(a=>`<li class="ml-4 list-disc text-slate-300 mb-1">${a}</li>`).join('')}</ul>
      <h3 class="font-semibold text-amber-500 mt-4 mb-2">Key Points</h3><ul>${ch.keyPoints.map(k=>`<li class="ml-4 list-disc text-slate-400 mb-1">${k}</li>`).join('')}</ul>`;
  }

  function closeModal() {
    document.getElementById("modal").classList.add("hidden");
  }

  function renderQuiz() {
    const container = document.getElementById("content");
    container.innerHTML = "";
    if(currentQuestion >= quizQuestions.length) {
      const div = document.createElement("div");
      div.className = "text-center bg-slate-800 border border-slate-700 p-8 rounded-xl";
      div.innerHTML = `<h2 class="text-2xl font-serif mb-4">Quiz Complete</h2>
        <p class="text-amber-500 font-bold mb-4">${quizScore} / ${quizQuestions.length}</p>
        <button onclick="resetQuiz()" class="bg-amber-500 px-4 py-2 rounded">Retake Quiz</button>`;
      container.appendChild(div);
      return;
    }

    const q = quizQuestions[currentQuestion];
    const div = document.createElement("div");
    div.className = "bg-slate-800 border border-slate-700 p-6 rounded-xl";
    div.innerHTML = `<h3 class="text-lg font-medium mb-4">${q.q}</h3>`;
    q.o.forEach((opt,i)=>{
      const btn = document.createElement("button");
      btn.className = "block w-full text-left p-2 mb-2 rounded bg-slate-700 hover:bg-slate-600";
      btn.innerText = opt;
      btn.onclick = ()=>{
        if(i === q.c) quizScore++;
        currentQuestion++;
        renderQuiz();
      };
      div.appendChild(btn);
    });
    container.appendChild(div);
  }

  function resetQuiz() {
    quizScore = 0;
    currentQuestion = 0;
    renderQuiz();
  }

  showTab('chapters');
</script>
</body>
</html>
